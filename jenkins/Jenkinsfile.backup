#!/usr/bin/env groovy

node {
	deleteDirs()
	scm checkout

	stage('Building aspnet-api-nginx') {
		shell make -C ./polykube-aspnet-api-nginx push
	}

	stage('Building aspnet-api') {
		shell make -C ./polykube-aspnet-api push
	}

	stage('Building frontend') {
		shell make -C ./polykube-frontend push
	}

	stage('Building postgres') {
		shell make -C ./polykube-postgres push
	}

	stage('Building redis') {
		shell make -C ./polykube-redis push
	}
}
